{"ast":null,"code":"import _classCallCheck from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import'./style.css';import Header from'../../components/Header/Header';import*as authActions from'../../store/actions/authActions';import{connect}from'react-redux';import{base_url}from'../../constants';var Orders=/*#__PURE__*/function(_Component){_inherits(Orders,_Component);var _super=_createSuper(Orders);function Orders(){var _this;_classCallCheck(this,Orders);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={ordersList:[]};_this.getOrders=function(){console.log(_this.props.auth.isAuthenticated);var token=_this.props.auth.token;var userId=_this.props.auth.user.userId;fetch(\"\".concat(base_url,\"/order/getorders/\").concat(userId),{headers:{'Content-Type':'application/json','auth-token':token}}).then(function(response){return response.json();}).then(function(jsonResponse){console.log(jsonResponse);_this.setState({ordersList:jsonResponse.message});}).catch(function(error){console.log(error);});};_this.formatDate=function(date){var d=new Date(date);return\"\".concat(d.getDate(),\"/\").concat(d.getMonth()+1,\"/\").concat(d.getFullYear());};_this.getOrderTotal=function(id){var singleOrder=_this.state.ordersList.find(function(order){return order._id===id;});var orderTotal=0;singleOrder.order.forEach(function(order){orderTotal=orderTotal+order.price*order.quantity;});return orderTotal;};return _this;}_createClass(Orders,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!this.props.auth.isAuthenticated){this.props.getToken().then(function(result){if(result){_this2.getOrders();}else{_this2.props.history.push('/login');}});}else{this.getOrders();}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(\"div\",{className:\"Content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"Card\"},/*#__PURE__*/React.createElement(\"p\",{className:\"CardText\"},\"My Orders\"),this.state.ordersList.map(function(order){return/*#__PURE__*/React.createElement(\"div\",{key:order._id,className:\"Order\"},/*#__PURE__*/React.createElement(\"div\",{className:\"OrderHeader\"},/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},order._id)),/*#__PURE__*/React.createElement(\"div\",{className:\"OrderDescription\"},/*#__PURE__*/React.createElement(\"div\",{className:\"od1\"},/*#__PURE__*/React.createElement(\"p\",{className:\"odtitle\"},\"Delivered Address\"),/*#__PURE__*/React.createElement(\"p\",null,\"\".concat(order.address.address,\" \").concat(order.address.cityDistrictTown,\" \").concat(order.address.state,\" - \").concat(order.address.pinCode))),/*#__PURE__*/React.createElement(\"div\",{className:\"od2\"},/*#__PURE__*/React.createElement(\"p\",{className:\"odtitle\"},\"Payment Type\"),/*#__PURE__*/React.createElement(\"a\",{className:\"odp\"},order.paymentType)),/*#__PURE__*/React.createElement(\"div\",{className:\"od3\"},/*#__PURE__*/React.createElement(\"p\",{className:\"odtitle\"},\"Payment Status\"),/*#__PURE__*/React.createElement(\"a\",{className:\"odp\"},order.paymentStatus))),/*#__PURE__*/React.createElement(\"div\",null,order.order.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{key:item._id,style:{display:'flex',alignItems:'center',margin:'5px 0',borderBottom:'1px solid #cecece'}},/*#__PURE__*/React.createElement(\"div\",{style:{width:'80px',height:'80px',overflow:'hidden',position:'relative'},className:\"ImageContainer\"},/*#__PURE__*/React.createElement(\"img\",{style:{maxWidth:'100%',maxHeight:'100%',position:'absolute',left:'50%',transform:'translateX(-50%)'},src:item.product.productPic[0].img})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"odtitle\"},item.product.name),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:'14px',color:'#555',fontWeight:'bold'}},/*#__PURE__*/React.createElement(\"p\",null,\"Quantity: \",item.quantity),/*#__PURE__*/React.createElement(\"p\",null,\"$\",item.price*item.quantity))));})),/*#__PURE__*/React.createElement(\"div\",{className:\"OrderFooter\"},/*#__PURE__*/React.createElement(\"p\",null,\"Ordered On \",/*#__PURE__*/React.createElement(\"span\",null,_this3.formatDate(order.orderDate))),/*#__PURE__*/React.createElement(\"p\",null,\"Order Total \",/*#__PURE__*/React.createElement(\"span\",null,\"$\",_this3.getOrderTotal(order._id)))));}))));}}]);return Orders;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getToken:function getToken(){return dispatch(authActions.getToken());}};};export default connect(mapStateToProps,mapDispatchToProps)(Orders);","map":{"version":3,"sources":["E:/mongoDb/store/baali-store/client/src/containers/Orders/index.js"],"names":["React","Component","Link","Header","authActions","connect","base_url","Orders","state","ordersList","getOrders","console","log","props","auth","isAuthenticated","token","userId","user","fetch","headers","then","response","json","jsonResponse","setState","message","catch","error","formatDate","date","d","Date","getDate","getMonth","getFullYear","getOrderTotal","id","singleOrder","find","order","_id","orderTotal","forEach","price","quantity","getToken","result","history","push","map","address","cityDistrictTown","pinCode","paymentType","paymentStatus","item","display","alignItems","margin","borderBottom","width","height","overflow","position","maxWidth","maxHeight","left","transform","product","productPic","img","name","fontSize","color","fontWeight","orderDate","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './style.css';\r\nimport Header from '../../components/Header/Header';\r\nimport * as authActions from '../../store/actions/authActions';\r\nimport { connect } from 'react-redux';\r\nimport { base_url } from '../../constants';\r\n\r\nclass Orders extends Component{\r\n\r\n    state = {\r\n        ordersList: []\r\n    }\r\n\r\n    componentDidMount(){\r\n\r\n        if(!this.props.auth.isAuthenticated){\r\n           this.props.getToken()\r\n            .then(result => {\r\n                if(result){\r\n                    this.getOrders();\r\n                }else{\r\n                    this.props.history.push('/login');\r\n                }\r\n            })\r\n        }else{\r\n            this.getOrders();\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    getOrders = () => {\r\n        console.log(this.props.auth.isAuthenticated)\r\n        const token =  this.props.auth.token;\r\n        const userId = this.props.auth.user.userId;\r\n        fetch(`${base_url}/order/getorders/${userId}`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'auth-token': token\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(jsonResponse => {\r\n            console.log(jsonResponse);\r\n            this.setState({\r\n                ordersList: jsonResponse.message\r\n            });\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    formatDate = (date) => {\r\n        let d = new Date(date);\r\n        return `${d.getDate()}/${d.getMonth() + 1}/${d.getFullYear()}`;\r\n    }\r\n\r\n    getOrderTotal = (id) => {\r\n        const singleOrder = this.state.ordersList.find(order => order._id === id);\r\n        let orderTotal = 0;\r\n        singleOrder.order.forEach(order => {\r\n            orderTotal = orderTotal + (order.price * order.quantity)\r\n        });\r\n\r\n        return orderTotal;\r\n    }\r\n\r\n    render() {\r\n\r\n        \r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Header />\r\n                <div className=\"Content\">\r\n                    <div className=\"Card\">\r\n                        <p className=\"CardText\">My Orders</p>\r\n\r\n                        {\r\n                            this.state.ordersList.map(order => {\r\n                                return (\r\n                                    <div key={order._id} className=\"Order\">\r\n                                        <div className=\"OrderHeader\">\r\n                                            <a href=\"#\">{order._id}</a>\r\n                                        </div>\r\n                                        <div className=\"OrderDescription\">\r\n                                            <div className=\"od1\">\r\n                                                <p className=\"odtitle\">Delivered Address</p>\r\n                                                <p>{`${order.address.address} ${order.address.cityDistrictTown} ${order.address.state} - ${order.address.pinCode}`}</p>\r\n                                            </div>\r\n                                            <div className=\"od2\">\r\n                                                <p className=\"odtitle\">Payment Type</p>\r\n                                                <a className=\"odp\">{order.paymentType}</a>\r\n                                            </div>\r\n                                            <div className=\"od3\">\r\n                                                <p className=\"odtitle\">Payment Status</p>\r\n                                                <a className=\"odp\">{order.paymentStatus}</a>\r\n                                            </div>\r\n                                        \r\n                                        </div>\r\n                                        <div>\r\n                                            {order.order.map(item => (\r\n                                                <div key={item._id} style={{display: 'flex', alignItems: 'center', margin: '5px 0', borderBottom: '1px solid #cecece'}}>\r\n                                                    <div style={{width: '80px', height: '80px', overflow: 'hidden', position: 'relative'}} className=\"ImageContainer\">\r\n                                                        <img style={{maxWidth: '100%', maxHeight: '100%', position: 'absolute', left: '50%', transform: 'translateX(-50%)'}} src={item.product.productPic[0].img}/>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <p className=\"odtitle\">{item.product.name}</p>\r\n                                                        <div style={{fontSize: '14px', color: '#555', fontWeight: 'bold'}}>\r\n                                                        <p>Quantity: {item.quantity}</p>\r\n                                                        <p>${item.price * item.quantity}</p>\r\n                                                        </div>\r\n                                                       \r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                        <div className=\"OrderFooter\">\r\n                                            <p>Ordered On <span>{this.formatDate(order.orderDate)}</span></p>\r\n                                            <p>Order Total <span>${this.getOrderTotal(order._id)}</span></p>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        auth: state.auth\r\n    }\r\n}\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        getToken: () => dispatch(authActions.getToken())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Orders);"]},"metadata":{},"sourceType":"module"}