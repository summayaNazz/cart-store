{"ast":null,"code":"import _defineProperty from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\mongoDb\\\\store\\\\baali-store\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link,Redirect}from'react-router-dom';import'./style.css';import Logo from'../../components/Logo';import MobileTypeInput from'../../components/UI/MobileTypeInput';import SubmitGradientButton from'../../components/UI/SubmitGradientButton';import*as authActions from'../../store/actions/authActions';import{connect}from'react-redux';import Error from'../../components/Error';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={redirectToReferrer:false,email:'',password:'',isError:false,errorMessage:''};_this.textHandler=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.setError=function(error,message){_this.setState({error:error,errorMessage:message});};_this.loginHandler=function(e){e.preventDefault();if(_this.state.email===''){_this.setError(true,'Enter Email');return;}var emailPattern=new RegExp(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/);if(!emailPattern.test(_this.state.email)){_this.setError(true,'Invalid Email Address');return;}if(_this.state.password===''){_this.setError(true,'Enter Password');return;}_this.props.authenticate(_this.state.email,_this.state.password).then(function(response){console.log(response);if(response.hasOwnProperty('token')){window.localStorage.setItem('auth',JSON.stringify(response));_this.setState({redirectToReferrer:true});}}).catch(function(error){console.log(error);});};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!this.props.auth.isAuthenticated){this.props.getToken().then(function(result){// result will be either true or false\nif(result){_this2.setState({redirectToReferrer:true});}}).catch(function(er){console.log(er);});}}},{key:\"render\",value:function render(){if(this.state.redirectToReferrer){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"LoginContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"WelcomeText\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Login\")),/*#__PURE__*/React.createElement(Logo,{style:{margin:'0 auto'}}),/*#__PURE__*/React.createElement(\"div\",{className:\"LoginWrapper\"},/*#__PURE__*/React.createElement(\"p\",null),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.loginHandler,autoComplete:\"off\"},/*#__PURE__*/React.createElement(MobileTypeInput,{type:\"text\",placeholder:\"Email\",value:this.state.email,textHandler:this.textHandler,name:\"email\"}),/*#__PURE__*/React.createElement(MobileTypeInput,{type:\"password\",placeholder:\"Password\",value:this.state.password,textHandler:this.textHandler,name:\"password\"}),/*#__PURE__*/React.createElement(Error,null,this.state.errorMessage),/*#__PURE__*/React.createElement(SubmitGradientButton,{label:\"Login\",style:{marginTop:'30px'}}))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Create a new account\")));}}]);return Login;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{authenticate:function authenticate(email,password){return dispatch(authActions.authenticate(email,password));},getToken:function getToken(){return dispatch(authActions.getToken());}};};var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps,mapDispatchToProps)(Login);","map":{"version":3,"sources":["E:/mongoDb/store/baali-store/client/src/containers/Login/index.js"],"names":["React","Component","Link","Redirect","Logo","MobileTypeInput","SubmitGradientButton","authActions","connect","Error","Login","state","redirectToReferrer","email","password","isError","errorMessage","textHandler","e","setState","target","name","value","setError","error","message","loginHandler","preventDefault","emailPattern","RegExp","test","props","authenticate","then","response","console","log","hasOwnProperty","window","localStorage","setItem","JSON","stringify","catch","auth","isAuthenticated","getToken","result","er","margin","marginTop","display","justifyContent","mapDispatchToProps","dispatch","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport './style.css';\r\nimport Logo from '../../components/Logo';\r\n\r\nimport MobileTypeInput from '../../components/UI/MobileTypeInput';\r\nimport SubmitGradientButton from '../../components/UI/SubmitGradientButton';\r\n\r\nimport * as authActions from '../../store/actions/authActions';\r\n import { connect } from 'react-redux';\r\n import Error from '../../components/Error';\r\n\r\n\r\nclass Login extends Component {\r\n\r\n    state = {\r\n        redirectToReferrer: false,\r\n        email: '',\r\n        password: '',\r\n        isError: false,\r\n        errorMessage: ''\r\n    }\r\n\r\n    textHandler = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    setError = (error, message) => {\r\n        this.setState({\r\n            error: error,\r\n            errorMessage: message\r\n        })\r\n    }\r\n\r\n    loginHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        if(this.state.email === ''){\r\n            this.setError(true, 'Enter Email'); return;\r\n        }\r\n\r\n        const emailPattern = new RegExp(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/);\r\n        if(!emailPattern.test(this.state.email)){\r\n            this.setError(true, 'Invalid Email Address'); return;\r\n        }\r\n\r\n        if(this.state.password === ''){\r\n            this.setError(true, 'Enter Password'); return;\r\n        }\r\n\r\n        this.props.authenticate(this.state.email, this.state.password)\r\n        .then(response => {\r\n            console.log(response);\r\n            if(response.hasOwnProperty('token')){\r\n                window.localStorage.setItem('auth', JSON.stringify(response))\r\n                this.setState({\r\n                    redirectToReferrer: true\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(!this.props.auth.isAuthenticated){\r\n            this.props.getToken()\r\n            .then(result => {\r\n                // result will be either true or false\r\n                if(result){\r\n                    this.setState({\r\n                        redirectToReferrer: true\r\n                    });\r\n                }\r\n                \r\n            })\r\n            .catch(er => {\r\n                console.log(er);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if(this.state.redirectToReferrer){\r\n            return <Redirect to=\"/\" />\r\n        }\r\n\r\n        \r\n\r\n        return (\r\n            <div className=\"LoginContainer\">\r\n                <div className=\"WelcomeText\">\r\n                    <h3>Login</h3>\r\n                </div>\r\n                <Logo style={{margin: '0 auto'}} />\r\n                <div className=\"LoginWrapper\">\r\n                    <p></p>\r\n                    <form onSubmit={this.loginHandler} autoComplete=\"off\">\r\n\r\n                        <MobileTypeInput \r\n                            type=\"text\"\r\n                            placeholder=\"Email\"\r\n                            value={this.state.email}\r\n                            textHandler={this.textHandler}\r\n                            name=\"email\"\r\n                        />\r\n                        <MobileTypeInput \r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={this.state.password}\r\n                            textHandler={this.textHandler}\r\n                            name=\"password\"\r\n                        />\r\n\r\n                        <Error>\r\n                            {this.state.errorMessage}\r\n                        </Error>\r\n                        \r\n                        <SubmitGradientButton \r\n                            label=\"Login\"\r\n                            style={{marginTop: '30px'}}\r\n                        />\r\n                    </form>\r\n\r\n                    \r\n\r\n        </div> \r\n                <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                    <Link to=\"/signup\">Create a new account</Link>\r\n                    {/* <Link to=\"/forget-password\">Forgot Password ?</Link>  */}\r\n                </div>  \r\n                \r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        authenticate: (email, password) => dispatch(authActions.authenticate(email, password)),\r\n        getToken: () => dispatch(authActions.getToken())\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        auth: state.auth\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}